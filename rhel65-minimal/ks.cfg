install
cdrom
lang en_US.UTF-8
keyboard us
network --bootproto=dhcp
rootpw --iscrypted $1$damlkd,f$UC/u5pUts5QiU3ow.CSso/
firewall --enabled --service=ssh
authconfig --enableshadow --passalgo=sha512
selinux --disabled
timezone UTC
bootloader --location=mbr

text
skipx
zerombr

clearpart --all --initlabel
autopart

auth  --useshadow  --enablemd5
firstboot --disabled
reboot

%packages --nobase
@core
sudo
wget
openssh-clients

# Virtaulbox Guest Dependencies
perl
bzip2
gcc
gcc-c++
kernel-devel
make
openssl-devel
readline-devel
sqlite-devel
zlib-devel

# Puppet Dependencies
ruby
ruby-rdoc
augeas-libs
libselinux-ruby
pciutils
%end

%post
/usr/sbin/groupadd vagrant
/usr/sbin/useradd vagrant -g vagrant -G wheel
echo "vagrant"|passwd --stdin vagrant
echo "vagrant        ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers.d/vagrant
chmod 0440 /etc/sudoers.d/vagrant -R vagrant /home/vagrant/.ssh
%end
